version: '3.1'

services:
    yvideo:
        depends_on:
            - database
        build:
            context: ../../docker_contexts/$mode/yvideo
            args:
                sbt_version: 0.13.8
            dockerfile: Dockerfile
        image: yvideo_travis
        command: bash -c "sbt -no-colors test -Ddb.default.username=$$MYSQL_USER -Ddb.default.password=$$MYSQL_PASSWORD -Dplay.evolutions.db.default.autoApply=true -DapplyEvolutions.default=true"
        environment:
            MYSQL_USER: root
            MYSQL_PASSWORD: test

